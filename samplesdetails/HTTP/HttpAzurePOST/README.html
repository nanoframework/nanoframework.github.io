<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>&#127798;️&#127798;️&#127798;️ - HTTP.HttpAzurePOST Sample | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="&#127798;️&#127798;️&#127798;️ - HTTP.HttpAzurePOST Sample | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/Samples/blob/main/samples/HTTP/HttpAzurePOST/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="---httphttpazurepost-sample">🌶️🌶️🌶️ - HTTP.HttpAzurePOST Sample</h1>

<p>This sample shows how to use the <a href="https://docs.nanoframework.net/api/System.Net.html">NanoFramework.System.Net</a> API to POST a message to the Azure IoT Hub. This can also be used as a starting point to understand a HTTP Post.</p>
<p>The sample is <a href="https://github.com/nanoframework/Samples/tree/main/samples/HTTP/HttpAzurePOST/Program.cs">located here</a>.</p>
<h2 id="hardware-requirements">Hardware requirements</h2>
<p>Any hardware device running a nanoFramework image that supports Wifi.</p>
<h2 id="related-topics">Related topics</h2>
<h3 id="references">References</h3>
<ul>
<li><a href="https://github.com/nanoframework/Samples/tree/main/samples/AMQP">Sample.AMQP</a></li>
<li><a href="https://en.wikipedia.org/wiki/POST_(HTTP)">Wikipedia POST Overview</a></li>
<li><a href="https://en.wikipedia.org/wiki/X.509#Certificate_filename_extensions">Wikipedia X.509 Certificate .pem format</a></li>
</ul>
<h2 id="using-the-sample">Using the sample</h2>
<ol>
<li><p>Create an Azure account</p>
</li>
<li><p>Create an IoT Hub using your Azure Account</p>
</li>
<li><p>Create a Device in your IoT Hub</p>
</li>
<li><p>Generate a SAS Token by creating a symmetric key for your IoT Device you created utilizing the primary key of the device. There are many ways to do this. One example using the Azure CLI can be found <a href="https://docs.microsoft.com/en-us/cli/azure/ext/azure-iot/iot/hub?view=azure-cli-latest#ext-azure-iot-az-iot-hub-generate-sas-token">here</a>. A simple way to create this is using the Azure IoT explorer program.</p>
</li>
<li><p>Start Microsoft Visual Studio 2019 and select <strong>File</strong> &gt; <strong>Open</strong> &gt; <strong>Project/Solution</strong>.</p>
</li>
<li><p>Enter in your SAS Token into Program.cs using the following format &quot;SharedAccessSignature sr=(YourIoTHubName).azure-devices.net%2Fdevices%2F(YourdeviceName)&amp;sig=(YourDeviceSymmetricKey)&quot;</p>
<pre><code class="lang-csharp">string sas = &quot;&lt;Enter SAS Token Here See Read Me for example&gt;&quot;;
</code></pre>
</li>
<li><p>Enter your Wifi Settings in the program.cs file</p>
<pre><code class="lang-csharp">private const string MySsid = &quot;&lt;replace-with-valid-ssid&quot;;
private const string MyPassword = &quot;&lt;replace-with-valid-password&gt;&quot;;
</code></pre>
</li>
<li><p>Connect a button from the GPIO pin in Program.cs (Pin 0) to ground. When you press the button it will create a connection from Pin 0 to ground and send a message to the cloud.</p>
<pre><code class="lang-csharp">// setup user button
_userButton = new GpioController().OpenPin(0, PinMode.Input);
_userButton.ValueChanged += UserButton_ValueChanged;
</code></pre>
</li>
</ol>
<h2 id="build-the-sample">Build the sample</h2>
<ol>
<li>Start Microsoft Visual Studio 2022 or Visual Studio 2019 (Visual Studio 2017 should be OK too) and select <code>File &gt; Open &gt; Project/Solution</code>.</li>
<li>Starting in the folder where you unzipped the samples/cloned the repository, go to the subfolder for this specific sample. Double-click the Visual Studio Solution (.sln) file.</li>
<li>Press <code>Ctrl+Shift+B</code>, or select <code>Build &gt; Build Solution</code>.</li>
</ol>
<h2 id="run-the-sample">Run the sample</h2>
<p>The next steps depend on whether you just want to deploy the sample or you want to both deploy and run it.</p>
<h3 id="deploying-the-sample">Deploying the sample</h3>
<ul>
<li>Select <code>Build &gt; Deploy Solution</code>.</li>
</ul>
<h3 id="deploying-and-running-the-sample">Deploying and running the sample</h3>
<ul>
<li>To debug the sample and then run it, press F5 or select <code>Debug &gt; Start Debugging</code>.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p><strong>Important</strong>: Before deploying or running the sample, please make sure your device is visible in the Device Explorer.</p>
<p><strong>Tip</strong>: To display the Device Explorer, go to Visual Studio menus: <code>View &gt; Other Windows &gt; Device Explorer</code>.</p>
</div>
<h2 id="additional-info">Additional Info</h2>
<ul>
<li>Since this is an embedded device with nanoFramework installed, certificates are not prebuilt into the device to make a HTTPS connection.</li>
<li>Therefore if you want to make a HTTPS POST or GET you have to use your own certificates or use ones that the website already has. That is why this example uses the .pem file from azure.</li>
<li>For another example of using a certificate file look at the HTTPWebRequest sample.</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/Samples/blob/main/samples/HTTP/HttpAzurePOST/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

