<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>&#127798;️&#127798;️ - Simple sample with Azure lib and retry pattern for connection | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="&#127798;️&#127798;️ - Simple sample with Azure lib and retry pattern for connection | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/Samples/blob/main/samples/AzureSDK/AzureSDKBasic/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="---simple-sample-with-azure-lib-and-retry-pattern-for-connection">🌶️🌶️ - Simple sample <strong>with</strong> Azure lib and retry pattern for connection</h1>

<p>Shows how to use the Azure IoT SDK library with a proper pattern to connect, reconnect, manage the connection. This leverages the <a href="https://github.com/nanoframework/nanoFramework.Azure.Devices">Azure SDK</a>.</p>
<p>Please make sure you enter properly your wifi credential and the Azure IoT device information.</p>
<p>You can test this sample by enabling and disabling the device in Azure IoT. You will see that you will get the various notifications for the connection and disconnection. The sample will behave without exception and will always try to reconnect properly:</p>
<p><img src="../../../samplesimages/AzureSDK/AzureSDKBasic/output.png" alt="telemetry example"></p>
<p>The sample is <a href="https://github.com/nanoframework/Samples/tree/main/samples/AzureSDK/AzureSDKBasic/">located here</a>.</p>
<h2 id="hardware-requirements">Hardware requirements</h2>
<p>An hardware device with networking capabilities running a nanoFramework image.
This code has been tested with ESP32 boards. This can be replaced by any other board with networking capabilities.</p>
<p>The sample uses wifi, this part can be as well replaced with an ethernet connection. It will work the exact same way.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>In this sample, if the connection or something is not setup properly you won't be able to debug properly. Please make sure you are using another sample to understand how Azure Client with a sample and deep sleep is working before using this one.</p>
</div>
<h3 id="reference">Reference</h3>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-mqtt-support">Azure IoT documentation for MQTT</a>.</li>
<li><a href="https://github.com/nanoframework/System.Device.Wifi">nanoFramework Network helpers</a>.</li>
<li><a href="https://github.com/nanoframework/nanoFramework.Azure.Devices">nanoFramework Azure IoT SDK</a>.</li>
</ul>
<h2 id="build-the-sample">Build the sample</h2>
<ol>
<li>Simply adjust the device IoT Hub elements and your network.</li>
<li>Start Microsoft Visual Studio 2019 by opening the solution.</li>
<li>Make sure you have your ESP32 showing up in the Device Explorer window.</li>
<li>Press <code>Ctrl+Shift+B</code>, or select <strong>Build</strong> &gt; <strong>Build Solution</strong>.</li>
</ol>
<h2 id="run-the-sample">Run the sample</h2>
<div class="IMPORTANT">
<h5>Important</h5>
<p>You can debug this sample only for one cycle as the device will very quickly go to sleep. If you want to debug, comment the part where it goes to sleep and replace with and infinite thread sleep timeout or a loop to once of the previous part of the code.</p>
<p><strong>Important</strong>: Before deploying or running the sample, please make sure your device is visible in the Device Explorer.</p>
<p><strong>Tip</strong>: To display the Device Explorer, go to Visual Studio menus: <code>View &gt; Other Windows &gt; Device Explorer</code>.</p>
</div>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/Samples/blob/main/samples/AzureSDK/AzureSDKBasic/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

