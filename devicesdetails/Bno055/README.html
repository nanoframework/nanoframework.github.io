<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>BNO055 - inertial measurement unit | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="BNO055 - inertial measurement unit | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Bno055/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="bno055---inertial-measurement-unit">BNO055 - inertial measurement unit</h1>

<p>Those sensors are intelligent 9-axis absolute orientation sensors. Most of the implementations are using I2C sensors but the sensor supports as well HID over I2C and serial port communication. This class only supports I2C.</p>
<p>All operations for a current usage has been developed. The individual interruption level settings for each sensor has not been implemented. If needed, they are quite straight forward to implement.</p>
<h2 id="documentation">Documentation</h2>
<p><img src="../../devicesimages/Bno055/BNO055.jpg" alt="BNO055"></p>
<p>BNO055 <a href="https://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BNO055-DS000.pdf">datasheet</a></p>
<p>You will find this device as <a href="https://www.dexterindustries.com/product/imu-sensor/">&quot;Inertial Measurement Unit&quot;</a> or <a href="https://learn.adafruit.com/adafruit-bno055-absolute-orientation-sensor/overview">&quot;Adafruit BNO055 Absolute Orientation Sensor&quot;</a></p>
<h2 id="usage">Usage</h2>
<p><strong>Important</strong>: make sure you properly setup the I2C pins especially for ESP32 before creating the <code>I2cDevice</code>, make sure you install the <code>nanoFramework.Hardware.ESP32 nuget</code>:</p>
<pre><code class="lang-csharp">//////////////////////////////////////////////////////////////////////
// when connecting to an ESP32 device, need to configure the I2C GPIOs
// used for the bus
Configuration.SetPinFunction(21, DeviceFunction.I2C1_DATA);
Configuration.SetPinFunction(22, DeviceFunction.I2C1_CLOCK);
</code></pre>
<p>For other devices like STM32, please make sure you're using the preset pins for the I2C bus you want to use.</p>
<p>Create a <code>Bno055Sensor</code> class and pass the I2C device. The default I2C address is provided in the class.</p>
<pre><code class="lang-csharp">I2cDevice i2cDevice = I2cDevice.Create(new I2cConnectionSettings(1, Bno055Sensor.DefaultI2cAddress));
Bno055Sensor bno055Sensor = new Bno055Sensor(i2cDevice);
Debug.WriteLine($&quot;Id: {bno055Sensor.Info.ChipId}, AccId: {bno055Sensor.Info.AcceleratorId}, GyroId: {bno055Sensor.Info.GyroscopeId}, MagId: {bno055Sensor.Info.MagnetometerId}&quot;);
Debug.WriteLine($&quot;Firmware version: {bno055Sensor.Info.FirmwareVersion}, Bootloader: {bno055Sensor.Info.BootloaderVersion}&quot;);
Debug.WriteLine($&quot;Temperature source: {bno055Sensor.TemperatureSource}, Operation mode: {bno055Sensor.OperationMode}, Units: {bno055Sensor.Units}&quot;);
Debug.WriteLine($&quot;Powermode: {bno055Sensor.PowerMode}&quot;);
</code></pre>
<p>You can easily access the sensor information and settings thru the properties.</p>
<h2 id="calibration">Calibration</h2>
<p>To get accurate measurement, it is better to wait for the Magnetometer to calibrate. As in your phone, when the calibration is needed, it is necessary to move the sensor in the air to help for the calibration.</p>
<p>The following code shows how to check the calibration:</p>
<pre><code class="lang-csharp">Debug.WriteLine(&quot;Checking the magnetometer calibration, move the sensor up to the calibration will be complete if needed&quot;);
var calibrationStatus = bno055Sensor.GetCalibrationStatus();
while ((calibrationStatus &amp; CalibrationStatus.MagnetometerSuccess) != (CalibrationStatus.MagnetometerSuccess))
{
    Debug.Write($&quot;.&quot;);
    calibrationStatus = bno055Sensor.GetCalibrationStatus();
    Thread.Sleep(200);
}

Debug.WriteLine();
Debug.WriteLine(&quot;Calibration completed&quot;);
</code></pre>
<p>Please note that it is not really necessary to check the calibration of the other sensors and the system. The qualibraiton is done all the time. The important one is the Magnetometer.</p>
<h2 id="accessing-sensor-data">Accessing sensor data</h2>
<p>Simply access the various sensor data thru their properties. Note that it is better to read at once the data and then display them, or manipulate them rather than accessing the sub element every time. The reason is because in the first case, you'll do 1 measurement and the data will be consistent, in the second case, you'll do 1 measurement every time you access 1 sub property which means, the data will be inconsistent.</p>
<p><em>Wrong way:</em></p>
<pre><code class="lang-csharp">// Data will be inconsistent in this case!
// Do not access the data like this
Debug.WriteLine($&quot;Magnetometer X: {bno055Sensor.Magnetometer.X} Y: {bno055Sensor.Magnetometer.Y} Z: {bno055Sensor.Magnetometer.Z}&quot;);
</code></pre>
<p><strong>Good way:</strong></p>
<pre><code class="lang-csharp">// First read and store the data
var magneto = bno055Sensor.Magnetometer;
// Then manipulate the data
Debug.WriteLine($&quot;Magnetometer X: {magneto.X} Y: {magneto.Y} Z: {magneto.Z}&quot;);
</code></pre>
<p>The sensor offers 9-axis measurement. Here is an example showing all the sensor properties you can access:</p>
<pre><code class="lang-csharp">while(true)
{
    var magneto = bno055Sensor.Magnetometer;
    Debug.WriteLine($&quot;Magnetometer X: {magneto.X} Y: {magneto.Y} Z: {magneto.Z}&quot;);
    var gyro = bno055Sensor.Gyroscope;
    Debug.WriteLine($&quot;Gyroscope X: {gyro.X} Y: {gyro.Y} Z: {gyro.Z}&quot;);
    var accele = bno055Sensor.Accelerometer;
    Debug.WriteLine($&quot;Acceleration X: {accele.X} Y: {accele.Y} Z: {accele.Z}&quot;);
    var orien = bno055Sensor.Orientation;
    Debug.WriteLine($&quot;Orientation Heading: {orien.X} Roll: {orien.Y} Pitch: {orien.Z}&quot;);
    var line = bno055Sensor.LinearAcceleration;
    Debug.WriteLine($&quot;Linear acceleration X: {line.X} Y: {line.Y} Z: {line.Z}&quot;);
    var gravity = bno055Sensor.Gravity;
    Debug.WriteLine($&quot;Gravity X: {gravity.X} Y: {gravity.Y} Z: {gravity.Z}&quot;);
    var qua = bno055Sensor.Quaternion;
    Debug.WriteLine($&quot;Quaternion X: {qua.X} Y: {qua.Y} Z: {qua.Z} W: {qua.W}&quot;);
    var temp = bno055Sensor.Temperature.Celsius;
    Debug.WriteLine($&quot;Temperature: {temp} °C&quot;);
    Thread.Sleep(100);
}
</code></pre>
<h2 id="information-regarding-sensors-and-units">Information regarding sensors and units</h2>
<ul>
<li><p><em>Orientation</em>:</p>
<ul>
<li><p>Absolute Orientation (Euler Vector, 100Hz)</p>
</li>
<li><p>Three axis orientation data based on a 360° sphere</p>
</li>
<li><p>Heading = Vector3.X; Roll = Vector3.Y; Pitch = Vector3.Z</p>
</li>
<li><p>Units availabel are Degrees (default) or Radians, you can change with</p>
<pre><code class="lang-csharp">bno055Sensor.Units = bno055Sensor.Units | Units.EulerAnglesRadians;
</code></pre>
</li>
</ul>
</li>
<li><p><em>Quaternion</em></p>
<ul>
<li>Absolute Orientation (Quaterion, 100Hz)</li>
<li>Four point quaternion output for more accurate data manipulation</li>
<li>Unit is 1 Quaternion = 2^14 returned data</li>
</ul>
</li>
<li><p><em>Magnetometer</em></p>
<ul>
<li>Magnetic Field Strength Vector (20Hz)</li>
<li>Three axis of magnetic field sensing in micro Tesla (uT)</li>
</ul>
</li>
<li><p><em>Acceleration</em></p>
<ul>
<li>Acceleration Vector (100Hz)</li>
<li>Three axis of acceleration (gravity + linear motion)</li>
<li>Default unit in m/s^2, can be changed for mg</li>
</ul>
</li>
<li><p><em>LinearAcceleration</em></p>
<ul>
<li>Linear Acceleration Vector (100Hz)</li>
<li>Three axis of linear acceleration data (acceleration minus gravity)</li>
<li>Default unit in m/s^2, can be changed for mg</li>
</ul>
</li>
<li><p><em>Gravity</em></p>
<ul>
<li>Gravity Vector (100Hz)</li>
<li>Three axis of gravitational acceleration (minus any movement)</li>
<li>Default unit in m/s^2, can be changed for mg</li>
</ul>
</li>
<li><p><em>Gyroscope</em></p>
<ul>
<li>Angular Velocity Vector (100Hz)</li>
<li>Three axis of 'rotation speed'</li>
<li>Default unit is Degree per second but can be changed to Radian per second</li>
</ul>
</li>
<li><p><em>Temperature</em></p>
<ul>
<li><p>Temperature (1Hz)</p>
</li>
<li><p>Ambient temperature in degrees celsius</p>
</li>
<li><p>Default can be changed for Farenheit</p>
</li>
<li><p>Temperature can be measured thru the Gyroscope or the Accelerometer</p>
</li>
<li><p>Precision seems better with the Gyroscope, so it is set by default. You can change the source like this:</p>
<pre><code class="lang-csharp">bno055Sensor.TemperatureSource = TemperatureSource.Accelerometer;
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="sensor-data-calibration">Sensor data calibration</h2>
<p>You can get and set the sensor data qualibration. Every sensor which permit the operation has a function to get the calibration data and set the calibration data.</p>
<p>This is an example of how to get and set the calibration data for the Accelerometer.</p>
<pre><code class="lang-csharp">Vector4 calib = bno055Sensor.GetAccelerometerCalibrationData();
// Change, transform the calibration data
bno055Sensor.SetAccelerometerCalibrationData(calib);
</code></pre>
<h2 id="remapping-the-accelerometer-axis">Remapping the accelerometer axis</h2>
<p>It is possible to remap the acceleroter axis as well as get their configuration.</p>
<p>For example, you can change the X axis for a negative signe likle this:</p>
<pre><code class="lang-csharp">var axisMap = bno055Sensor.GetAxisMap();
axisMap[0].Sign = AxisSign.Negative;
bno055Sensor.SetAxisMap(axisMap[0], axisMap[1], axisMap[2]);
</code></pre>
<p>In the returned array, X is the first element, Y the second and Z the last one.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Bno055/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

