<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Buzzer - Piezo Buzzer Controller | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Buzzer - Piezo Buzzer Controller | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Buzzer/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="buzzer---piezo-buzzer-controller">Buzzer - Piezo Buzzer Controller</h1>

<p>This device binding allows playing certain tones using piezo buzzer. It uses PWM with 50% duty cycle and various frequencies.</p>
<p>Piezo buzzers with three pins supported as well as piezo buzzers with two pins.</p>
<h2 id="device-family">Device Family</h2>
<p>This binding was tested on two types of piezo buzzers. First type of buzzer has two pins <em>vcc</em> and <em>gnd</em>. Second type of buzzers has addition <em>signal</em> pin.</p>
<h2 id="usage">Usage</h2>
<p>The  <code>Buzzer</code>  class can use either software or hardware PWM. This is done fully transparently by the initialization.</p>
<p>If you want to use the software PWM, you have to call the constructor that takes in one integer: <code>public Buzzer(int pinNumber)</code>.</p>
<p>To use the hardware PWM, make sure you reference correctly the chip and channel you want to use, and call the constructor that takes two integers (chip and channel).</p>
<p>Also you could explicitly pass a PwmChannel if you want to construct that yourself.</p>
<p>Here's an example how you could use <code>Buzzer</code>.</p>
<pre><code class="lang-csharp">using (Buzzer buzzer = new Buzzer(21)); // Initialize buzzer with software PWM connected to pin 21.
{
    buzzer.PlayTone(440, 1000); // Play tone with frequency 440 hertz for one second.
}
</code></pre>
<blockquote>
<p><strong>Important</strong> Depending on your platform, you may have to setup the pins properly. In case of ESP32, use the <code>nanoFramework.Hardware.Esp32</code> nuget then configure the pin properly like <code>Configuration.SetPinFunction(21, DeviceFunction.PWM1);</code>. That should be done before creating the Buzzer.</p>
</blockquote>
<p><code>Buzzer</code> allows to play tone for certain duration like in example above.
Or you could start tone playing, perform some operation and then stop tone playing like in a following example.</p>
<pre><code class="lang-csharp">using (Buzzer buzzer = new Buzzer(21));
{
    buzzer.StartPlaying(440);
    Thread.Sleep(1000);
    buzzer.StopPlaying();
}
</code></pre>
<p>The result will be the same as in previous example.</p>
<p><code>Buzzer</code> allows you to play only single tone at a single moment. If you will call <code>SetFrequency</code> sequentially with a different frequencies then the last call will override previous calls. Following example explains it.</p>
<pre><code class="lang-csharp">using (Buzzer buzzer = new Buzzer(21)); // Initialize buzzer with software PWM connected to pin 21.
{
    buzzer.StartPlaying(440);
    Thread.Sleep(1000);
    buzzer.StartPlaying(880);
    Thread.Sleep(1000);
    buzzer.StopPlaying();
}
</code></pre>
<p>This example will play tone with frequency 440 for a second and then will play tone with a frequency 880 for a second.</p>
<h2 id="example-of-alphabet-song-played-using-buzzer">Example of Alphabet song played using Buzzer</h2>
<h3 id="schematic">Schematic</h3>
<p>You have 2 types of buzzers. Those with 2 pins only and those with 3 pins.
For buzzer with 3 pins: simply connect <em>signal</em> pin of buzzer to commutation pin (any valid GPIO), <em>vcc</em> pin to <em>+5v</em>, <em>gnd</em> pin to ground. For buzzer with 2 pins: connect <em>vcc</em> pin of buzzer to commutation pin (any valid GPIO) and <em>gnd</em> to ground.</p>
<p>You could use any types of buzzers in any order. No changes to code are required.</p>
<p><img src="../../devicesimages/Buzzer/Buzzer.Samples.wiring.png" alt="schema"></p>
<h3 id="code">Code</h3>
<p>This sample contains a wrapper on a Buzzer called <code>MelodyPlayer</code>.</p>
<h4 id="melodyplayer-and-melodyelement">MelodyPlayer and MelodyElement</h4>
<p>To create an instance of a MelodyPlayer use following line:</p>
<pre><code class="lang-csharp">MelodyPlayer player = new MelodyPlayer(new  Buzzer(26));
</code></pre>
<p>Constructor takes a single parameter type of <code>Buzzer</code>.</p>
<p>After initialization MelodyPlayer allows playing melody represented by sequence of <code>MelodyElement</code> objects.
MelodyElement is a base class for two types of elements:</p>
<ul>
<li><code>NoteElement</code> - It will be played. So in a constructor it accepts <code>Note</code> and <code>Octave</code> to determine frequency of the sound and <code>Duration</code> to determine duration of the sound.</li>
<li><code>PauseElement</code> - It's supposed to make a pause between two NoteElements so it's only have duration of pause as constructor parameter.</li>
</ul>
<h4 id="how-to-use">How to use</h4>
<p>Following example demonstrates how to create MelodyElement sequence and how to play it using MelodyPlayer:</p>
<pre><code class="lang-csharp">IListMelodyElement sequence = new ListMelodyElement()
{
    new NoteElement(Note.C, Octave.Fourth, Duration.Quarter),
    new PauseElement(Duration.Quarter),
    new NoteElement(Note.C, Octave.Fourth, Duration.Quarter)
};

using (var player = new MelodyPlayer(new Buzzer(21)))
{
    player.Play(sequence, 100);
}
</code></pre>
<p><code>Play</code> method MelodyPlayer accepts a sequence of MelodyElements as the first parameter and a tempo as the second.
Tempo is an amount of quarter notes per minute. So the more tempo is the quicker melody will be played.</p>
<p>Also there is an overload of <code>MelodyPlayer.Play</code> with 3 parameters: MelodyElement sequence, tempo and transposition value. Transposition increases or decreases every tone of melody sequence by desired amount of semitones. For example: following line will decrease every tone of sequence by one octave since octave consists of 12 semitones.</p>
<pre><code class="lang-csharp">player.Play(sequence, 100, -12);
</code></pre>
<h4 id="parallel-buzzer-playing">Parallel buzzer playing</h4>
<p>As far as <code>MelodyPlayer.Play</code> method is not asynchronous, calls of this method are wrapped by task like this:</p>
<pre><code class="lang-csharp">var player1 = new MelodyPlayer(new Buzzer(21));
player1.Play(AlphabetSong, 100, -12);
player1.Play(AlphabetSong, 100);
</code></pre>
<p>This approach allows playing two melodies independently however example above plays a single melody in the same time using two different buzzers.</p>
<h4 id="alphabet-song">Alphabet song</h4>
<p>Presented sample plays Alphabet song using two buzzers. The song is hardcoded in a <code>Buzzer.Sample.cs</code> file as a sequence of MelodyElements. Read more about Alphabet song on <a href="https://en.wikipedia.org/wiki/Alphabet_song">Wikipedia</a></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Buzzer/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

