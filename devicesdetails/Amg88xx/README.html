<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>AMG8833/AMG8834/AMG8853/AMG8854 Infrared Array Sensor Family | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="AMG8833/AMG8834/AMG8853/AMG8854 Infrared Array Sensor Family | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Amg88xx/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="amg8833amg8834amg8853amg8854-infrared-array-sensor-family">AMG8833/AMG8834/AMG8853/AMG8854 Infrared Array Sensor Family</h1>

<p>The sensors of the AMG88xx family of infrared array sensors have 64 thermophile pixels arranged in an 8×8 matrix. The sensor works as a thermal infrared camera. It can detect objects (e.g. human bodies) from a distance of up 5-7m. A pixel can measure object temperatures in a range of 0 to 80°C / -20 to 100°C with a resolution of 0.25°C and an accuracy of ±2.5°C / ±4.5°C. The sensor has a view field angle of 60° and a 7.5° view angle per pixel.</p>
<p>The manufacturer (Panasonic) names the following applications: home appliances (microwaves and air-conditioners), building automation (people counting, air conditioning control), home automation (people detection), factory automation (fault prevention). The sensor delivers a heat image through its digital interface (I2C) at a rate of 1 or 10 frames per second.
Additionally an interrupt pin can raise an event when any individual pixel goes above or below a configured threshold.</p>
<p><img src="../../devicesimages/Amg88xx/AMG88xx.png" alt="Illustration of thermophile pixel array and heat map"></p>
<h2 id="documentation">Documentation</h2>
<ul>
<li>Product <a href="https://industry.panasonic.eu/components/sensors/grid-eye">homepage</a></li>
<li>Product <a href="https://eu.industrial.panasonic.com/sites/default/pidseu/files/downloads/files/">flyer</a>grid-eye_flyer_english_web.pdf</li>
<li>Reference <a href="https://mediap.industry.panasonic.eu/assets/custom-upload/Components/Sensors/Industrial%20Sensors/Infrared%20Array%20Sensor%20Grid-EYE/grid_eye_reference_specifications_160205.pdf">Specification</a></li>
<li><a href="https://mediap.industry.panasonic.eu/assets/custom-upload/Components/Sensors/Industrial%20Sensors/Infrared%20Array%20Sensor%20Grid-EYE/faqs_grideye_v1.0.pdf">FAQ</a></li>
<li>Application <a href="https://mediap.industry.panasonic.eu/assets/custom-upload/Components/Sensors/Industrial%20Sensors/Infrared%20Array%20Sensor%20Grid-EYE/application_notes_grid-eye_0.pdf">note</a></li>
</ul>
<h3 id="device-family">Device Family</h3>
<p>the <a href="https://industrial.panasonic.com/cdbs/www-data/pdf/ADI8000/ADI8000COL13.pdf">AMG88</a> family consists of 4 members:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Resolution</th>
<th>Gain</th>
<th>Vcc</th>
<th>Obj. Temp. Range</th>
<th>Resolution</th>
<th>Accuracy</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMG8833</td>
<td>8x8</td>
<td>High</td>
<td>3V3</td>
<td>0-80°C</td>
<td>0.25°C</td>
<td>±2.5°C</td>
</tr>
<tr>
<td>AMG8834</td>
<td>8x8</td>
<td>Low</td>
<td>3V3</td>
<td>-20-100°C</td>
<td>0.25°C</td>
<td>±4.5°C</td>
</tr>
<tr>
<td>AMG8853</td>
<td>8x8</td>
<td>High</td>
<td>5V0</td>
<td>0-80°C</td>
<td>0.25°C</td>
<td>±2.5°C</td>
</tr>
<tr>
<td>AMG8854</td>
<td>8x8</td>
<td>Low</td>
<td>5V0</td>
<td>-20-100°C</td>
<td>0.25°C</td>
<td>±4.5°C</td>
</tr>
</tbody>
</table>
<p>The sensor is equipped with an on-chip thermistor which can be read out.
The thermistor has a measurement range of -20...80°C at a resolution of 0.0625°C.</p>
<h2 id="binding-notes">Binding Notes</h2>
<p>The Amg88xx binding provides a lean interface to retrieve the pixel array and to control the sensor. All sensor functions are covered. Any further processing, e.g. pattern recognition, is beyond the scope of the binding.</p>
<h3 id="thermal-image--pixel-array">Thermal image / Pixel array</h3>
<p>The temperature readings of the pixel array can be read as a thermal image with 64 pixels arranged in an 8x8 matrix.
The pixel array can be read out at any time and speed. However, the sensor updates the corresponding registers depending on the configured frame rate.</p>
<p>The sensor has an integrated thermistor which can be readout to get the chip temperature.</p>
<p><strong>Note:</strong> The chip temperature does <em>not</em> equal to the environmental temperature.</p>
<p>The current image can be read from the sensor into the binding by:</p>
<pre><code class="lang-csharp">public void ReadImage()
</code></pre>
<p>The temperature of a pixel specified by its coordinates can be read using an indexer:</p>
<pre><code class="lang-csharp">public Temperature this[int x, int y]
</code></pre>
<p>The whole temperature image can be read as a two-dimensional array:</p>
<pre><code class="lang-csharp">public Temperature[,] TemperatureImage
</code></pre>
<p>The raw reading (12-bit two's complement format) of a pixel specified by its number can be read using an indexer:</p>
<pre><code class="lang-csharp">public Int16 this[int n]
</code></pre>
<p><strong>Note</strong>: there is no statement in the reference specification regarding the synchronization between an update of the pixel registers and the readout operation. So, you may read out pixel data from two subsequent frames in one readout operation. However, for normal application this shouldn't be relevant.</p>
<p>Property:</p>
<pre><code class="lang-csharp">public Temperature SensorTemperature
</code></pre>
<p><strong>Note</strong>: the thermistor temperature is <strong>not</strong> equivalent to the</p>
<h3 id="operating-mode--power-control">Operating Mode / Power Control</h3>
<p>The sensor supports four operating modes to control power consumption:</p>
<ul>
<li>Normal</li>
<li>Sleep Mode</li>
<li>Stand-by with 60 seconds intermittence</li>
<li>Stand-by with 10 seconds intermittence</li>
</ul>
<p>Property:</p>
<pre><code class="lang-csharp">public OperatingMode OperatingMode
</code></pre>
<p><strong>Note</strong>: refer to the reference specification for further details on mode transitions and sensor behavior.</p>
<h3 id="reset">Reset</h3>
<p>The sensor supports two types of resets.</p>
<ul>
<li><strong>Reset:</strong> Resets all flags and registers to default values</li>
<li><strong>Resetting all flags:</strong> Resets all flags (status register, interrupt flag, interrupt table)</li>
</ul>
<pre><code class="lang-csharp">public void Reset()
public void ResetAllFlags()
</code></pre>
<p><strong>Note</strong>: resetting the interrupt related flags is only required if you want to clear flags while the readings are still within the hysteresis span. See interrupts section for further details on interrupt behavior.</p>
<h3 id="sensor-status">Sensor Status</h3>
<p>The sensor status indicates if any pixel or the chip internal thermistor overran the upper or lower operating range limit. It also flags on the occurrence of an interrupt. The status can be read out and reset per flag:</p>
<pre><code class="lang-csharp">public bool HasTemperatureOverflow();
public void ClearTemperatureOverflow();

public bool HasThermistorOverflow();
public void ClearThermistorOverflow();

public bool HasInterrupt();
public void ClearInterrupt();

public void ClearAllFlags();
</code></pre>
<p><strong>Note</strong>: resetting the interrupt flag is only required if you want to clear flags while the readings are still within the hysteresis span (but already within the lower-upper range). This method does not clear the interrupt flags of the individual pixels.
See interrupts section for further details on interrupt behavior.</p>
<p><em>Note</em>: the thermistor overflow flag is only menthioned in early versions of the reference specification.
It is not clear whether this is a specification error or a change in a newer revision of the sensor.</p>
<h3 id="frame-rate">Frame Rate</h3>
<p><strong>Default:</strong> 10fps</p>
<p>The sensor supports frame rates of 1fps and 10fps. The frame rate defines the update interval of the pixels. This is independent from the readout interval through the I2C interface.</p>
<p>Property:</p>
<pre><code class="lang-csharp">public FrameRate FrameRate
</code></pre>
<h3 id="moving-average">Moving average</h3>
<p><strong>Default:</strong> off</p>
<p>The sensor supports a moving average mode. In this mode it builds the twice moving average for each pixel.</p>
<ul>
<li>If the frame rate is set to 10fps the sensor takes the average of the readings <em>n</em> and <em>n+1</em> and yields their average as output.</li>
<li>If the frame rate is set to 1fps the sensor takes the readings of 10 frames (as the sensor runs internally always at 10fps) and builds the average.
The average of two averages of 10 readings is the resulting output.</li>
</ul>
<p><img src="../../devicesimages/Amg88xx/AMG88xxAvgMode.svg" alt="Moving average principle"></p>
<p>The noise per pixel will decrease to 1/sqrt2 when using the moving average mode.</p>
<p>Property:</p>
<pre><code class="lang-csharp">public bool UseMovingAverageMode
</code></pre>
<p><em><strong>Important</strong></em>: the reference specification states that the current mode can be read, but it doesn't seem to work at the time being. In this case the property is always read as <code>false</code>.</p>
<h3 id="interrupt-control-levels-and-pixel-flags">Interrupt control, levels and pixel flags</h3>
<p>The sensor can raise an interrupt if any pixel passes a given value. The event is signaled by the interrupt flag of the status register. Additionally the INT pin of the sensor can be pulled low.</p>
<p>Properties:</p>
<pre><code class="lang-csharp">public InterruptMode PixelTemperatureInterruptMode
public bool InterruptPinEnabled
</code></pre>
<p>The interrupt levels can be configured. The lower and upper limit as well as the hysteresis level can be set and read. Initially the register is filled with zeros. The levels apply to all pixels equally.</p>
<p>Properties:</p>
<pre><code class="lang-csharp">public Temperature InterruptLowerLevel
public Temperature InterruptUpperLevel
public Temperature InterruptHysteresis
</code></pre>
<p>After the sensor raised an interrupt the triggering pixels can be readout from the interrupt table register.</p>
<pre><code class="lang-csharp">public bool[,] GetInterruptFlagTable()
</code></pre>
<p><img src="../../devicesimages/Amg88xx/AMG8833Int.svg" alt="Interrupt levels and hysteresis"></p>
<p>Interrupt levels and hysteresis</p>
<p>Note:</p>
<ul>
<li>be aware that the interrupt flag in the status register is reset automatically if no pixel temperature exceeds the lower or upper threshold. It is <strong>not</strong> required to reset the flag manually.</li>
<li>any flag in the interrupt flag table is automatically reset if the corresponding pixel is no long exceed the lower or upper threshold.</li>
<li>if a hysteresis is applied and the reading of a pixel is not passing the threshold anymore, while at the same time the reading is still within the hysteresis span, the interrupt flag can be cleared by using the <code>ResetAllFlags</code> method.</li>
</ul>
<h2 id="example">Example</h2>
<h3 id="overview">Overview</h3>
<p>The <a href="https://github.com/dotnet/iot/tree/main/src/devices/Amg88xx/samples">sample application</a> demonstrates the key functions of the sensor and the binding:</p>
<ul>
<li>thermal image readout</li>
<li>interrupt triggering based on temperature levels incl. hysteresis</li>
<li>sensor states</li>
<li>noise reduction by using the sensor's moving average function</li>
</ul>
<p>There are AMG88xx breakout boards available from a variety of vendors. You can use any of them as long as it provides access to the I2C interface of the sensor.</p>
<p><strong>Note:</strong> There are also boards available with additional interfaces or even with an integrated Arduino or compatible circuit. You can use this binding only if the boards gives you access to the I2C interface only.</p>
<h3 id="wiring">Wiring</h3>
<p>For demonstration purpose the INT-pin of the sensor is connected to a valid GPIO PIN of the MCU. Additionally an LED is connected to another valid GPIO PIN of the MCU. The LED signals the occurrence of an interrupt.
The resistor depends on the LED type; however 150R-220R is a safe choice for a standard red LED. Or precisely: <code>R = (3,3V -  U LED,forward) / I LED, forward</code></p>
<p><img src="../../devicesimages/Amg88xx/AMG88xxSample.png" alt="Wiring of a sensor breakout and LED for the sample"></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Amg88xx/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

