<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Multicast DNS | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Multicast DNS | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/MulticastDns/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="multicast-dns">Multicast DNS</h1>

<p>Multicast DNS (mDNS) is a computer networking protocol that acts as a DNS server on a local network. The main use case is to resolve hostnames to IP addresses within local networks. Modern browsers send a Multicast DNS question over UDP whenever requesting a domain with .local as TLD. For instance: <a href="http://nanodevice.local">http://nanodevice.local</a>.
This binding allows to resolve these DNS requests and return an IP address.
The implementation is complete so any other DNS queries can be treated and any of the standard DNS records can be returned.</p>
<h2 id="reference">Reference</h2>
<ul>
<li>Some information in <a href="https://en.wikipedia.org/wiki/Multicast_DNS">Wikipedia</a>.</li>
<li>mDNS is defined in <a href="https://datatracker.ietf.org/doc/html/rfc6762">RFC6762</a>.</li>
</ul>
<h2 id="use-cases">Use cases</h2>
<p>The primary use case is obviously resolving a .local domain to the IP address of the nanoFramework device which facilitates:</p>
<ul>
<li>A new IoT device lacking config starts in AP mode, mDNS allows to connect to it without knowing its IP address.</li>
<li>Once configured, a device typically gets its IP address from DHCP, mDNS again allows to connect to the device through a domain name which the user even could have chosen during configuration.</li>
<li>More exotic uses are also possible, think about P2P communication between IoT devices who are on the same local network. These devices can discover eachother through mDNS querying and monitoring without a need for internet, for a broker and even without configuring the devices.</li>
</ul>
<h2 id="usage">Usage</h2>
<p>You simply create an instance of the MulticastDNSService, register an event handler and you're set to go. In the event handler you can respond to DNS queries or monitor what's passing on the network.</p>
<pre><code class="lang-csharp">using MulticastDNSService multicastDNSService = new();
multicastDNSService.MessageReceived += MulticastDNSService_MessageReceived;
multicastDNSService.Start();

private static void MulticastDNSService_MessageReceived(object sender, MessageReceivedEventArgs e)
{
    // Treat e.Message
}
</code></pre>
<p>To allow sending out messages yourself a Send method is available on the service.</p>
<h2 id="information-on-the-sample">Information on the sample</h2>
<p>The sample is offering the resolution of a domain to an IP address (the first two use cases mentioned above). Change the WiFi credentials and run the program on some hardware.
It will output a Debug message to signal when ready and then you can use a browser to surf to <a href="http://nanodevice.local">your device</a>.</p>
<h2 id="limitations">Limitations</h2>
<p>Be mindful that the messages are transmitted over UDP. There is hence no guarantee that a message will arrive nor be treated by a device listening to mDNS. This is utterly
important when implementing the third use case (sending mDNS messages to discover other devices on the network). The discovery should be continuous and as per description in the RFC, a random delay should be implemented. This delay enlarges the chance that a device listening for your message will catch messages regularly since when that device is treating a message, it could skip an incoming message it was supposed to treat.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/MulticastDns/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

