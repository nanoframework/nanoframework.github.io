<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>System.Device.Model - attributes for device bindings | nanoFramework Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="System.Device.Model - attributes for device bindings | nanoFramework Documentation ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../x-cross/toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="systemdevicemodel---attributes-for-device-bindings">System.Device.Model - attributes for device bindings</h1>

<p><strong>This library is experimental, it may change and it may be moved to a different package in the future. Avoid taking direct dependency on it.</strong></p>
<p>This library provides a set of attributes which allow to annotate devices.</p>
<p>They can be used for:</p>
<ul>
<li>implementation of Azure Plug &amp; Play</li>
<li>providing extra metadata about sensors (we can i.e. generate some parts of the README file or add extra checks)</li>
</ul>
<p>Model is representing language independent description of the device. The attributes represent a C# mapping from C# types into the model.</p>
<h2 id="interfaceattribute">InterfaceAttribute</h2>
<p>Every class producing telemetry or exposing some commands should put a telemetry attribute on it</p>
<pre><code class="lang-csharp">    [Interface(&quot;LPS25H - Piezoresistive pressure and thermometer sensor&quot;)]
    public class Lps25h : IDisposable
</code></pre>
<ul>
<li>if class derives from class annotated with <code>[Interface(...)]</code> attribute:
<ul>
<li>class will inherit all annotations from the base class(es)</li>
<li>if class provides extra telemetry/command/properties it should add another InterfaceAttribute on itself</li>
<li>if class doesn't provide any extra annotations it should not have extra interface</li>
</ul>
</li>
<li>display name must be provided to the InterfaceAttribute</li>
</ul>
<h2 id="telemetryattribute">TelemetryAttribute</h2>
<p>Every method or property producing telemetry should have <code>[Telemetry]</code> attribute on it.
For properties providing name of the <code>Telemetry</code> is optional as it can be deduced from the property name.</p>
<p>Telemetry can be put on:</p>
<ul>
<li>properties</li>
<li>methods returning value but not taking any arguments</li>
<li>methods returning bool and taking one <code>out</code> argument
<ul>
<li>multiple <code>out</code> arguments are currently out of scope but are considered</li>
</ul>
</li>
</ul>
<pre><code class="lang-csharp">        [Telemetry]
        public Temperature Temperature =&gt; Temperature.FromDegreesCelsius(42.5f + ReadInt16(Register.Temperature) / 480f);

        [Telemetry(&quot;Humidity&quot;)]
        public bool TryReadHumidity(out RelativeHumidity humidity) =&gt; TryReadHumidityCore(out humidity);

        [Telemetry(&quot;Pressure&quot;)]
        public Pressure ReadPressure() { /*...*/ }
</code></pre>
<ul>
<li>if telemetry is not producing typed unit (i.e. <code>Vector3</code>) it should have additional <code>displayName</code> provided</li>
<li>optional arguments are treated as if they were not there</li>
<li>it's not allowed to have more than one <code>Telemetry</code> attribute with the same name on the same <code>Interface</code></li>
</ul>
<h2 id="propertyattribute">PropertyAttribute</h2>
<p>Properties should be put on properties or methods which describe the device or change its functioning.
They should only be used on things which don't change value between calls (unless it's been written to or a command has been executed on the device).
Specifially reading (telemetry) from the device should not change the state of the property.</p>
<p>Usage is similar to Telemetry with some additions:</p>
<ul>
<li>they can be writable
<ul>
<li>if same name (i.e. <code>PowerMode</code>) is used on i.e. <code>SetPowerMode</code> and <code>ReadPowerMode</code> they will be merged into a single model property</li>
</ul>
</li>
<li>they can be put on methods without return value taking one argument (it must not be be passed by reference)</li>
<li>it's not allowed for more than one writers or readers with the same name to be present on the same interface</li>
</ul>
<pre><code class="lang-csharp">[Property]
public Sampling HumiditySampling { get { /*...*/ } set { /* ... */ } }

[Property(&quot;PowerMode&quot;)]
public void SetPowerMode(Bme680PowerMode powerMode) { /*...*/ }
[Property(&quot;PowerMode&quot;)]
public Bme680PowerMode ReadPowerMode() { /*...*/ }
</code></pre>
<h2 id="componentattribute">ComponentAttribute</h2>
<p>Components represent references to other (instances) of interfaces.
They can only be put on the properties, the return type of the property or its ancestor class should have an <code>Interface</code> attribute.</p>
<pre><code class="lang-csharp">[Component]
public SenseHatTemperatureAndHumidity TemperatureAndHumidity { get; private set; }

// ...
public class SenseHatTemperatureAndHumidity : Hts221.Hts221 { /* ... */ }
// ...
[Interface(&quot;HTS221 - Capacitive digital sensor for relative humidity and temperature&quot;)]
public class Hts221 : IDisposable { /* ... */ }
</code></pre>
<h2 id="commandattribute">CommandAttribute</h2>
<p>Commands can be something which can be executed on the device and they can be put only on methods.</p>
<pre><code class="lang-csharp">[Command]
public void PlayTone(double frequency, int duraton) { /* ... */ }
[Command]
protected override void SetDefaultConfiguration() { /* ... */ }
</code></pre>
<h2 id="type-serialization">Type serialization</h2>
<p>Only simple types can be serialized:</p>
<ul>
<li>enums (without Flags attribute)
<ul>
<li>values out of enum range are not permitted (i.e. bitwise combination)</li>
</ul>
</li>
<li>UnitsNet units</li>
<li>basic C# types</li>
<li>System.Numerics.Vector2, System.Numerics.Vector3, System.Numerics.Vector4</li>
<li>System.Drawing.Color</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/devicesdetails/System.Device.Model/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2018 nanoFramework Contributors<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
