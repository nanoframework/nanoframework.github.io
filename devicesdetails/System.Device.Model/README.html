<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>System.Device.Model - attributes for device bindings | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="System.Device.Model - attributes for device bindings | .NET nanoFramework Documentation ">
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/System.Device.Model/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="systemdevicemodel---attributes-for-device-bindings">System.Device.Model - attributes for device bindings</h1>

<p><strong>This library is experimental, it may change and it may be moved to a different package in the future. Avoid taking direct dependency on it.</strong></p>
<p>This library provides a set of attributes which allow to annotate devices.</p>
<p>They can be used for:</p>
<ul>
<li>implementation of Azure Plug &amp; Play</li>
<li>providing extra metadata about sensors (we can i.e. generate some parts of the README file or add extra checks)</li>
</ul>
<p>Model is representing language independent description of the device. The attributes represent a C# mapping from C# types into the model.</p>
<h2 id="interfaceattribute">InterfaceAttribute</h2>
<p>Every class producing telemetry or exposing some commands should put a telemetry attribute on it</p>
<pre><code class="lang-csharp">    [Interface(&quot;LPS25H - Piezoresistive pressure and thermometer sensor&quot;)]
    public class Lps25h : IDisposable
</code></pre>
<ul>
<li>if class derives from class annotated with <code>[Interface(...)]</code> attribute:
<ul>
<li>class will inherit all annotations from the base class(es)</li>
<li>if class provides extra telemetry/command/properties it should add another InterfaceAttribute on itself</li>
<li>if class doesn't provide any extra annotations it should not have extra interface</li>
</ul>
</li>
<li>display name must be provided to the InterfaceAttribute</li>
</ul>
<h2 id="telemetryattribute">TelemetryAttribute</h2>
<p>Every method or property producing telemetry should have <code>[Telemetry]</code> attribute on it.
For properties providing name of the <code>Telemetry</code> is optional as it can be deduced from the property name.</p>
<p>Telemetry can be put on:</p>
<ul>
<li>properties</li>
<li>methods returning value but not taking any arguments</li>
<li>methods returning bool and taking one <code>out</code> argument
<ul>
<li>multiple <code>out</code> arguments are currently out of scope but are considered</li>
</ul>
</li>
</ul>
<pre><code class="lang-csharp">        [Telemetry]
        public Temperature Temperature =&gt; Temperature.FromDegreesCelsius(42.5f + ReadInt16(Register.Temperature) / 480f);

        [Telemetry(&quot;Humidity&quot;)]
        public bool TryReadHumidity(out RelativeHumidity humidity) =&gt; TryReadHumidityCore(out humidity);

        [Telemetry(&quot;Pressure&quot;)]
        public Pressure ReadPressure() { /*...*/ }
</code></pre>
<ul>
<li>if telemetry is not producing typed unit (i.e. <code>Vector3</code>) it should have additional <code>displayName</code> provided</li>
<li>optional arguments are treated as if they were not there</li>
<li>it's not allowed to have more than one <code>Telemetry</code> attribute with the same name on the same <code>Interface</code></li>
</ul>
<h2 id="propertyattribute">PropertyAttribute</h2>
<p>Properties should be put on properties or methods which describe the device or change its functioning.
They should only be used on things which don't change value between calls (unless it's been written to or a command has been executed on the device).
Specifially reading (telemetry) from the device should not change the state of the property.</p>
<p>Usage is similar to Telemetry with some additions:</p>
<ul>
<li>they can be writable
<ul>
<li>if same name (i.e. <code>PowerMode</code>) is used on i.e. <code>SetPowerMode</code> and <code>ReadPowerMode</code> they will be merged into a single model property</li>
</ul>
</li>
<li>they can be put on methods without return value taking one argument (it must not be be passed by reference)</li>
<li>it's not allowed for more than one writers or readers with the same name to be present on the same interface</li>
</ul>
<pre><code class="lang-csharp">[Property]
public Sampling HumiditySampling { get { /*...*/ } set { /* ... */ } }

[Property(&quot;PowerMode&quot;)]
public void SetPowerMode(Bme680PowerMode powerMode) { /*...*/ }
[Property(&quot;PowerMode&quot;)]
public Bme680PowerMode ReadPowerMode() { /*...*/ }
</code></pre>
<h2 id="componentattribute">ComponentAttribute</h2>
<p>Components represent references to other (instances) of interfaces.
They can only be put on the properties, the return type of the property or its ancestor class should have an <code>Interface</code> attribute.</p>
<pre><code class="lang-csharp">[Component]
public SenseHatTemperatureAndHumidity TemperatureAndHumidity { get; private set; }

// ...
public class SenseHatTemperatureAndHumidity : Hts221.Hts221 { /* ... */ }
// ...
[Interface(&quot;HTS221 - Capacitive digital sensor for relative humidity and temperature&quot;)]
public class Hts221 : IDisposable { /* ... */ }
</code></pre>
<h2 id="commandattribute">CommandAttribute</h2>
<p>Commands can be something which can be executed on the device and they can be put only on methods.</p>
<pre><code class="lang-csharp">[Command]
public void PlayTone(double frequency, int duraton) { /* ... */ }
[Command]
protected override void SetDefaultConfiguration() { /* ... */ }
</code></pre>
<h2 id="type-serialization">Type serialization</h2>
<p>Only simple types can be serialized:</p>
<ul>
<li>enums (without Flags attribute)
<ul>
<li>values out of enum range are not permitted (i.e. bitwise combination)</li>
</ul>
</li>
<li>UnitsNet units</li>
<li>basic C# types</li>
<li>System.Numerics.Vector2, System.Numerics.Vector3, System.Numerics.Vector4</li>
<li>System.Drawing.Color</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/System.Device.Model/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

