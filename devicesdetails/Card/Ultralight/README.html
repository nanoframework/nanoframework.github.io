<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Ultralight card - RFID Card | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Ultralight card - RFID Card | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Card/Ultralight/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="ultralight-card---rfid-card">Ultralight card - RFID Card</h1>

<p>This class supports Ultralight cards. They are RFID cards responding to ISO 14443 type A. You need a specific card reader like PN532, PN5180 or MFRC522 to read, write those kind of cards.</p>
<h2 id="creating-a-card-and-reading-it">Creating a card and reading it</h2>
<p>You will find detailed examples for PN532 <a href="https://github.com/nanoFramework/nanoFramework.IoT.Device/tree/develop/devices/Pn532/samples">here</a>, for MFRC522 <a href="../../Mfrc522/samples">here</a> and for PN5180 <a href="../../Pn5180/samples">here</a>.</p>
<p>You'll need first to get the card from an RFID reader. The example below shows how to do it with a MFRC522 and read all the sectors, read the configuration data, and print all the sector data information, read NDEF, write NDEF.</p>
<pre><code class="lang-csharp">// Note: mfrc522 should not be null
var ultralight = new UltralightCard(mfrc522, 0);
ultralight.SerialNumber = card.NfcId;
Debug.WriteLine($&quot;Type: {ultralight.UltralightCardType}, Ndef capacity: {ultralight.NdefCapacity}&quot;);

var version = ultralight.GetVersion();
if ((version != null) &amp;&amp; (version.Length &gt; 0))
{
    Debug.WriteLine(&quot;Get Version details: &quot;);
    for (int i = 0; i &lt; version.Length; i++)
    {
        Debug.Write($&quot;{version[i]:X2} &quot;);
    }

    Debug.WriteLine(&quot;&quot;);
}
else
{
    Debug.WriteLine(&quot;Can't read the version.&quot;);
}

var sign = ultralight.GetSignature();
if ((sign != null) &amp;&amp; (sign.Length &gt; 0))
{
    Debug.WriteLine(&quot;Signature: &quot;);
    for (int i = 0; i &lt; sign.Length; i++)
    {
        Debug.Write($&quot;{sign[i]:X2} &quot;);
    }

    Debug.WriteLine(&quot;&quot;);
}
else
{
    Debug.WriteLine(&quot;Can't read the signature.&quot;);
}

// The ReadFast feature can be used as well, note that the MFRC522 has a very limited FIFO
// So maximum 9 pages can be read as once.
Debug.WriteLine(&quot;Fast read example:&quot;);
var buff = ultralight.ReadFast(0, 8);
if (buff != null)
{
    for (int i = 0; i &lt; buff.Length / 4; i++)
    {
        Debug.WriteLine($&quot;  Block {i} - {buff[i * 4]:X2} {buff[i * 4 + 1]:X2} {buff[i * 4 + 2]:X2} {buff[i * 4 + 3]:X2}&quot;);
    }
}

Debug.WriteLine(&quot;Dump of all the card:&quot;);
for (int block = 0; block &lt; ultralight.NumberBlocks; block++)
{
    ultralight.BlockNumber = (byte)block; // Safe cast, can't be more than 255
    ultralight.Command = UltralightCommand.Read16Bytes;
    var res = ultralight.RunUltralightCommand();
    if (res &gt; 0)
    {
        Debug.Write($&quot;  Block: {ultralight.BlockNumber:X2} - &quot;);
        for (int i = 0; i &lt; 4; i++)
        {
            Debug.Write($&quot;{ultralight.Data![i]:X2} &quot;);
        }

        var isReadOnly = ultralight.IsPageReadOnly(ultralight.BlockNumber);
        Debug.Write($&quot;- Read only: {isReadOnly} &quot;);

        Debug.WriteLine(&quot;&quot;);
    }
    else
    {
        Debug.WriteLine(&quot;Can't read card&quot;);
        break;
    }
}

Debug.WriteLine(&quot;Configuration of the card&quot;);
// Get the Configuration
res = ultralight.TryGetConfiguration(out Configuration configuration);
if (res)
{
    Debug.WriteLine(&quot;  Mirror:&quot;);
    Debug.WriteLine($&quot;    {configuration.Mirror.MirrorType}, page: {configuration.Mirror.Page}, position: {configuration.Mirror.Position}&quot;);
    Debug.WriteLine(&quot;  Authentication:&quot;);
    Debug.WriteLine($&quot;    Page req auth: {configuration.Authentication.AuthenticationPageRequirement}, Is auth req for read and write: {configuration.Authentication.IsReadWriteAuthenticationRequired}&quot;);
    Debug.WriteLine($&quot;    Is write lock: {configuration.Authentication.IsWrittenLocked}, Max num tries: {configuration.Authentication.MaximumNumberOfPossibleTry}&quot;);
    Debug.WriteLine(&quot;  NFC Counter:&quot;);
    Debug.WriteLine($&quot;    Enabled: {configuration.NfcCounter.IsEnabled}, Password protected: {configuration.NfcCounter.IsPasswordProtected}&quot;);
    Debug.WriteLine($&quot;  Is strong modulation: {configuration.IsStrongModulation}&quot;);
}
else
{
    Debug.WriteLine(&quot;Error getting the configuration&quot;);
}

NdefMessage message;
res = ultralight.TryReadNdefMessage(out message);
if (res &amp;&amp; message.Length != 0)
{
    foreach (var record in message.Records)
    {
        Debug.WriteLine($&quot;Record length: {record.Length}&quot;);
        if (TextRecord.IsTextRecord(record))
        {
            var text = new TextRecord(record);
            Debug.WriteLine(text.Text);
        }
    }
}
else
{
    Debug.WriteLine(&quot;No NDEF message in this &quot;);
}

res = ultralight.IsFormattedNdef();
if (!res)
{
    Debug.WriteLine(&quot;Card is not NDEF formatted, we will try to format it&quot;);
    res = ultralight.FormatNdef();
    if (!res)
    {
        Debug.WriteLine(&quot;Impossible to format in NDEF, we will still try to write NDEF content.&quot;);
    }
    else
    {
        res = ultralight.IsFormattedNdef();
        if (res)
        {
            Debug.WriteLine(&quot;Formatting successful&quot;);
        }
        else
        {
            Debug.WriteLine(&quot;Card is not NDEF formatted.&quot;);
        }
    }
}

NdefMessage newMessage = new NdefMessage();
newMessage.Records.Add(new TextRecord(&quot;I ❤ .NET nanoFramework&quot;, &quot;en&quot;, Encoding.UTF8));
res = ultralight.WriteNdefMessage(newMessage);
if (res)
{
    Debug.WriteLine(&quot;NDEF data successfully written on the card.&quot;);
}
else
{
    Debug.WriteLine(&quot;Error writing NDEF data on card&quot;);
}
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.IoT.Device/blob/develop/devices/Card/Ultralight/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>

