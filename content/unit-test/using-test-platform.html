<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Using the nanoFramework.TestPlatform | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Using the nanoFramework.TestPlatform | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/unit-test/using-test-platform.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="using-the-nanoframeworktestplatform">Using the nanoFramework.TestPlatform</h1>

<p>The core component to prepare your test is <code>nanoFramework.TestPlatform</code>.</p>
<h2 id="the-attributes">The attributes</h2>
<p>The classes and tests methods are recognized using attributes. You'll find the following ones:</p>
<ul>
<li><code>[TestClass]</code>: this attribute is used on a class, without this attribute on the calls, the class won't be considered as a a valid Unit Test and the test methods inside will be ignored. You can have as many classes as you want with this attribute. Each class can then contain as many tests methods, setup and cleanup as you want.</li>
<li><code>[TestMethod]</code>: this attribute is used on any method where you'll have tests running inside. You can have as many methods with this attribute as you want.</li>
<li><code>[Setup]</code>: this attribute is used on any method. This test will be called first. While you technically have as many of those functions per class, it is recommended to only use 1 per class. Typical usage is to setup hardware you'll need to have running for all the tests methods.</li>
<li><code>[Cleanup]</code>: this attribute is used on any method. This test will be called last, after the all the tests methods. While you technically have as many of those functions per class, it is recommended to only use 1 per class.</li>
</ul>
<h2 id="attributes-usage">Attributes usage</h2>
<p>Here is a typical example of how you can use the attributes:</p>
<pre><code class="lang-csharp">namespace nanoFramework.TestFramework.Test
{
    [TestClass]
    public class TestOfTest
    {
        [TestMethod]
        public void TestRaisesException()
        {
            Debug.WriteLine(&quot;Test will raise exception&quot;);
            Assert.Throws(typeof(Exception), ThrowMe);
        }

        private void ThrowMe()
        {
            throw new Exception(&quot;Test failed and it's a shame&quot;);
        }

        [Setup]
        public void RunSetup()
        {
            Debug.WriteLine(&quot;Setup&quot;);
        }

        [TestMethod]
        public void TestStringComparison()
        {
            Debug.WriteLine(&quot;Test string, Contains, EndsWith, StartWith&quot;);
            // Arrange
            string tocontains = &quot;this text contains and end with contains&quot;;
            string startcontains = &quot;contains start this text&quot;;
            string contains = &quot;contains&quot;;
            string doesnotcontains = &quot;this is totally something else&quot;;
            string empty = string.Empty;
            string stringnull = null;
            // Assert
            Assert.Contains(contains, tocontains);
            Assert.DoesNotContains(contains, doesnotcontains, &quot;Your own error message&quot;);
            Assert.DoesNotContains(contains, empty);
            Assert.DoesNotContains(contains, stringnull);
            Assert.StartsWith(contains, startcontains);
            Assert.EndsWith(contains, tocontains);
        }

        [TestMethod]
        public void MethodWillSkippIfFloatingPointSupportNotOK()
        {
            var sysInfoFloat = SystemInfo.FloatingPointSupport;
            if ((sysInfoFloat != FloatingPoint.DoublePrecisionHardware) &amp;&amp; (sysInfoFloat != FloatingPoint.DoublePrecisionSoftware))
            {
                Assert.SkipTest(&quot;Double floating point not supported, skipping the Assert.Double test&quot;);
            }

            double on42 = 42.1;
            double maxDouble = double.MaxValue;
            Assert.Equal(42.1, on42);
            Assert.Equal(double.MaxValue, maxDouble);
        }

        public void Nothing()
        {
            Debug.WriteLine(&quot;Nothing and should not be called&quot;);
        }

        [Cleanup]
        public void Cleanup()
        {
            Debug.WriteLine(&quot;Cleanup&quot;);
        }
    }
}
</code></pre>
<p>As you can see in this example, you just use the attributes to decorate the class and the functions.</p>
<p>Functions should be <code>void</code> type and take <strong>no</strong> argument at all.</p>
<p>The test <em>pass</em> if there is <strong>no</strong> exception happening in the function. If any exception happens in the function, it is considered as <em>failed</em>.</p>
<h2 id="function-visibility">Function visibility</h2>
<p>All functions with attributes for testing must be <code>public void</code>, if you set them as private or internal, they won't be discovered.</p>
<h2 id="asserting-in-the-test-functions">Asserting in the test functions</h2>
<p>As for most of the famous .NET Unit Test platform, the concept of <code>Assert</code> is present as well in .NET <strong>nanoFramework</strong>. You can see in the previous example some of those <code>Assert</code> functions. They take one or two arguments and are straight forward to use.</p>
<p>If there is an issue in those Assert function, an exception is raised.</p>
<p>Note that all the <code>Assert</code> functions can pass a custom message. For example: <code>Assert.Equal(42, 43, &quot;My custom message saying that 42 is not equal to 43&quot;);</code></p>
<h3 id="assertthrows">Assert.Throws</h3>
<p>This checks if a specific function will throw an exception. Usage:</p>
<pre><code class="lang-csharp">Assert.Throws(typeof(ExceptionTypeToCatch), AFunctionToCall);
</code></pre>
<p>Where:</p>
<ul>
<li><code>ExceptionTypeToCatch</code> has to be a type of Exception. Typical example is to check if the function you're trying to call rases a <code>ArgumentException</code> for example.</li>
<li><code>AFunctionToCall</code> is an <code>Action</code>, so a function you can call to check if an exception is raised.</li>
</ul>
<p>See the pattern in the previous example.</p>
<h3 id="asserttrue-and-assertfalse">Assert.True and Assert.False</h3>
<p>Simply check if something is True or False</p>
<pre><code class="lang-csharp">bool boola = true;
Assert.True(boola);
</code></pre>
<h3 id="assertequal-and-assetnotequal">Assert.Equal and Asset.NotEqual</h3>
<p><code>Assert.Equal</code> is  collection of functions that takes all the native Value Types as well as Array and check if the elements in the array are equals (if value) or same object (for non value types).</p>
<pre><code class="lang-csharp">Assert.Equal(elementa, elementb);
</code></pre>
<p>Same behavior for <code>Assert.NotEqual</code> but checking that the 2 elements are not equal.</p>
<pre><code class="lang-csharp">Assert.NotEqual(elementa, elementb);
</code></pre>
<h3 id="assertnull-and-assertnotnull">Assert.Null and Assert.NotNull</h3>
<p>Those functions check that an element is null or not null.</p>
<pre><code class="lang-csharp">object objnull = null;
object objnotnull = new object();
Assert.Null(objnull);
Assert.NotNull(objnotnull);
</code></pre>
<h3 id="assertistype-and-assertisnottype">Assert.IsType and Assert.IsNotType</h3>
<p>Those functions allows to check that an element is a specific type or not a specific type.</p>
<pre><code class="lang-csharp">Type typea = typeof(int);
Type typeb = typeof(int);
Type typec = typeof(long);
Assert.IsType(typea, typeb);
Assert.IsNotType(typea, typec);
</code></pre>
<h3 id="assertempty-and-assertnotempty">Assert.Empty and Assert.NotEmpty</h3>
<h3 id="assertsame-and-assertnotsame">Assert.Same and Assert.NotSame</h3>
<p>Functions to check that objects are the same or different.</p>
<pre><code class="lang-csharp">object obja = new object();
object objb = new object();
Assert.NotSame(obja, objb);
objb = obja;
Assert.Same(obja, objb);
</code></pre>
<h3 id="assert-for-string-checking">Assert for String checking</h3>
<p>A set of functions to help checking strings is available. They allow most of the common scenarios, checking that a string contains specific elements, start with, end with as well as not containing some elements.</p>
<pre><code class="lang-csharp">// Arrange
string tocontains = &quot;this text contains and end with contains&quot;;
string startcontains = &quot;contains start this text&quot;;
string contains = &quot;contains&quot;;
string doesnotcontains = &quot;this is totally something else&quot;;
string empty = string.Empty;
string stringnull = null;
// Assert
Assert.Contains(contains, tocontains);
Assert.DoesNotContains(contains, doesnotcontains);
Assert.DoesNotContains(contains, empty);
Assert.DoesNotContains(contains, stringnull);
Assert.StartsWith(contains, startcontains);
Assert.EndsWith(contains, tocontains);
</code></pre>
<h3 id="outputting-messages-from-the-tests">Outputting messages from the tests</h3>
<p>It's possible to output messages from the Unit Tests using <code>OutputHelper.Write</code> and <code>OutputHelper.WriteLine</code>. These work exactly as <code>Debug.Write</code> and <code>Debug.WriteLine</code> so simple or formatted output is available.</p>
<pre><code class="lang-csharp">OutputHelper.WriteLine(&quot;This is a message from Unit Test XYZ!&quot;);
</code></pre>
<pre><code class="lang-csharp">OutputHelper.WriteLine($&quot;This is another message from Unit Test XYZ, showing that {someVariable.Length} can be output too.&quot;);
</code></pre>
<h3 id="skipping-a-test">Skipping a test</h3>
<p>You can skip a test by using <code>Assert.SkipTest</code>. You can place an explanation like this:</p>
<pre><code class="lang-csharp">Assert.SkipTest(&quot;Double floating point not supported, skipping the Assert.Double test&quot;);
</code></pre>
<p><strong>Important</strong>: if you skip the <code>Setup</code> test, all the class <code>TestMethod</code> will be skipped as well. This is a convenient way to skip some specific hardware tests if the current hardware does not support them for example. This will allow to build different classes for different hardware for example and having only the right tests being executed.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/unit-test/using-test-platform.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
