<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Class Libraries | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class Libraries | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/architecture/class-libraries.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="class-libraries">Class Libraries</h1>

<h2 id="about-this-document">About this document</h2>
<p>This document describes the design and organization of .NET <strong>nanoFramework</strong> Class Libraries, offers some explanation on the choices that were made and how to add a new Class Library. The examples bellow are related with ChibiOS (which is the currently reference implementation for .NET <strong>nanoFramework</strong>).</p>
<h2 id="libraries">Libraries</h2>
<p>Follow the list of the existing libraries, respective NuGet package and CMake enable option:</p>
<table>
<thead>
<tr>
<th>Class Library</th>
<th>Version</th>
<th>CMake option</th>
</tr>
</thead>
<tbody>
<tr>
<td>Base Class Library (also know as mscorlib)</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.CoreLibrary/"><img src="https://img.shields.io/nuget/v/nanoFramework.CoreLibrary.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>(always included)</td>
</tr>
<tr>
<td>Base Class Library (without Reflection)</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.CoreLibrary.NoReflection/"><img src="https://img.shields.io/nuget/v/nanoFramework.CoreLibrary.NoReflection.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>(always included, -DNF_FEATURE_SUPPORT_REFLECTION=OFF)</td>
</tr>
<tr>
<td>nanoFramework.Device.Bluetooth</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Device.Bluetooth/"><img src="https://img.shields.io/nuget/v/nanoFramework.Device.Bluetooth.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.Device.Bluetooth=ON</td>
</tr>
<tr>
<td>nanoFramework.Device.Can</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Device.Can/"><img src="https://img.shields.io/nuget/v/nanoFramework.Device.Can.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.Device.Can=ON</td>
</tr>
<tr>
<td>nanoFramework.Device.OneWire</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Device.OneWire/"><img src="https://img.shields.io/nuget/v/nanoFramework.Device.OneWire.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.Device.OneWire=ON</td>
</tr>
<tr>
<td>nanoFramework.Graphics</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Graphics/"><img src="https://img.shields.io/nuget/v/nanoFramework.Graphics.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.Graphics=ON</td>
</tr>
<tr>
<td>nanoFramework.GiantGecko.Adc</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.GiantGecko.Adc/"><img src="https://img.shields.io/nuget/v/nanoFramework.GiantGecko.Adc.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.GiantGecko.Adc=ON</td>
</tr>
<tr>
<td>nanoFramework.M5Stack</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.M5Stack/"><img src="https://img.shields.io/nuget/v/nanoFramework.M5Stack.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.M5Stack=ON</td>
</tr>
<tr>
<td>nanoFramework.Hardware.Esp32</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Hardware.Esp32/"><img src="https://img.shields.io/nuget/v/nanoFramework.Hardware.Esp32.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_Hardware.Esp32=ON</td>
</tr>
<tr>
<td>nanoFramework.Hardware.Esp32.Rmt</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Hardware.Esp32.Rmt/"><img src="https://img.shields.io/nuget/v/nanoFramework.Hardware.Esp32.Rmt.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_Hardware.Esp32.Rmt=ON</td>
</tr>
<tr>
<td>nanoFramework.Hardware.GiantGecko</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Hardware.GiantGecko/"><img src="https://img.shields.io/nuget/v/nanoFramework.Hardware.GiantGecko.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_Hardware.GiantGecko=ON</td>
</tr>
<tr>
<td>nanoFramework.Hardware.Stm32</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Hardware.Stm32/"><img src="https://img.shields.io/nuget/v/nanoFramework.Hardware.Stm32.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_Hardware.Stm32=ON</td>
</tr>
<tr>
<td>nanoFramework.Hardware.TI</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Hardware.TI/"><img src="https://img.shields.io/nuget/v/nanoFramework.Hardware.TI.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_Hardware.TI=ON</td>
</tr>
<tr>
<td>nanoFramework.ResourceManager</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.ResourceManager/"><img src="https://img.shields.io/nuget/v/nanoFramework.ResourceManager.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.ResourceManager=ON</td>
</tr>
<tr>
<td>nanoFramework.Runtime.Events</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Runtime.Events/"><img src="https://img.shields.io/nuget/v/nanoFramework.Runtime.Events.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>(always included)</td>
</tr>
<tr>
<td>nanoFramework.Runtime.Native</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Runtime.Native/"><img src="https://img.shields.io/nuget/v/nanoFramework.Runtime.Native.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>(always included)</td>
</tr>
<tr>
<td>nanoFramework.Networking.Sntp</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Networking.Sntp/"><img src="https://img.shields.io/nuget/v/nanoFramework.Networking.Sntp.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>(included when network option is ON)</td>
</tr>
<tr>
<td>nanoFramework.TI.EasyLink</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.TI.EasyLink/"><img src="https://img.shields.io/nuget/v/nanoFramework.TI.EasyLink.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_nanoFramework.TI.EasyLink=ON</td>
</tr>
<tr>
<td>System.Device.Adc</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.Adc/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.Adc.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.Adc=ON</td>
</tr>
<tr>
<td>System.Device.Dac</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.Dac/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.Dac.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.Dac=ON</td>
</tr>
<tr>
<td>System.Device.I2c</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.I2c/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.I2c.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.I2c=ON</td>
</tr>
<tr>
<td>System.Device.I2s</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.I2s/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.I2s.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.I2s=ON</td>
</tr>
<tr>
<td>System.Device.Gpio</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.Gpio/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.Gpio.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.Gpio=ON</td>
</tr>
<tr>
<td>System.IO.FileSystem</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.IO.FileSystem/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.IO.FileSystem.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.IO.FileSystem=ON</td>
</tr>
<tr>
<td>System.IO.Ports</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.IO.Ports/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.IO.Ports.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.IO.Ports=ON</td>
</tr>
<tr>
<td>System.IO.Streams</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.IO.Streams/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.IO.Streams.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.IO.Streams=ON</td>
</tr>
<tr>
<td>System.Device.Pwm</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.Pwm/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.Pwm.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.Pwm=ON</td>
</tr>
<tr>
<td>System.Device.Spi</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.Spi/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.Spi.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.Spi=ON</td>
</tr>
<tr>
<td>System.Device.WiFi</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.WiFi/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.WiFi.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.WiFi=ON</td>
</tr>
<tr>
<td>System.Device.UsbStream</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Device.UsbClient/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Device.UsbClient.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Device.UsbStream=ON</td>
</tr>
<tr>
<td>Windows.Storage</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Windows.Storage/"><img src="https://img.shields.io/nuget/v/nanoFramework.Windows.Storage.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DNF_FEATURE_HAS_SDCARD=ON and/or -DNF_FEATURE_HAS_USB_MSD=ON</td>
</tr>
<tr>
<td>Windows.Storage.Streams</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Windows.Storage.Streams/"><img src="https://img.shields.io/nuget/v/nanoFramework.Windows.Storage.Streams.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_=ON</td>
</tr>
<tr>
<td>System.IO.FileSystem</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.IO.FileSystem/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.IO.FileSystem.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.IO.FileSystem=ON</td>
</tr>
<tr>
<td>System.Collections</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Collections/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Collections.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Math</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Math/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Math.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Math=ON</td>
</tr>
<tr>
<td>System.Net</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Net/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Net.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>-DAPI_System.Net=ON</td>
</tr>
<tr>
<td>System.Net.Http</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Net.Http/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Net.Http.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Net.Http.Client</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Net.Http.Client/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Net.Http.Client.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Net.Http.Server</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Net.Http.Server/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Net.Http.Server.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Net.Sockets.UdpClient</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Net.Sockets.UdpClient/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Net.Sockets.UdpClient.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Net.Sockets.TcpClient</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Net.Sockets.TcpClient/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Net.Sockets.TcpClient.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Runtime.Serialization</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Runtime.Serialization/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Runtime.Serialization.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Text</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Text/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Text.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Text.RegularExpressions</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Text.RegularExpressions/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Text.RegularExpressions.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
<tr>
<td>System.Threading</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.System.Threading/"><img src="https://img.shields.io/nuget/v/nanoFramework.System.Threading.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
<td>no native code</td>
</tr>
</tbody>
</table>
<h2 id="other-libraries">Other libraries</h2>
<table>
<thead>
<tr>
<th>Class Library</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMQP Net Lite</td>
<td><a href="https://www.nuget.org/packages/AMQPNetLite.nanoFramework/"><img src="https://img.shields.io/nuget/v/AMQPNetLite.nanoFramework.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>AMQP Net Lite (micro)</td>
<td><a href="https://www.nuget.org/packages/AMQPNetMicro.nanoFramework/"><img src="https://img.shields.io/nuget/v/AMQPNetMicro.nanoFramework.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.Azure.Devices</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Azure.Devices.Client/"><img src="https://img.shields.io/nuget/v/nanoFramework.Azure.Devices.Client.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.Aws.IoTCore.Devices</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Aws.IoTCore.Devices/"><img src="https://img.shields.io/nuget/v/nanoFramework.Aws.IoTCore.Devices.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.Logging</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Logging/"><img src="https://img.shields.io/nuget/v/nanoFramework.Logging.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.Json</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Json/"><img src="https://img.shields.io/nuget/v/nanoFramework.Json.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.m2mqtt</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.m2mqtt/"><img src="https://img.shields.io/nuget/v/nanoFramework.m2mqtt.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.SignalR.Client</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.SignalR.Client/"><img src="https://img.shields.io/nuget/v/nanoFramework.SignalR.Client.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.TestFramework</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.TestFramework/"><img src="https://img.shields.io/nuget/v/nanoFramework.TestFramework.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.WebServer</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.WebServer/"><img src="https://img.shields.io/nuget/v/nanoFramework.WebServer.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.DependencyInjection</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.DependencyInjection/"><img src="https://img.shields.io/nuget/v/nanoFramework.DependencyInjection.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.Hosting</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Hosting/"><img src="https://img.shields.io/nuget/v/nanoFramework.Hosting.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
</tbody>
</table>
<h2 id="board-support-packages-libraries">Board Support Packages libraries</h2>
<table>
<thead>
<tr>
<th>Class Library</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>nanoFramework.M5Stack</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.M5Stack/"><img src="https://img.shields.io/nuget/v/nanoFramework.M5Stack.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.M5Stick</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.M5StickC/"><img src="https://img.shields.io/nuget/v/nanoFramework.M5StickC.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.M5StickCPlus</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.M5StickCPlus/"><img src="https://img.shields.io/nuget/v/nanoFramework.M5StickCPlus.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.M5Core2</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.M5Core2/"><img src="https://img.shields.io/nuget/v/nanoFramework.M5Core2.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.AtomLite</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.AtomLite/"><img src="https://img.shields.io/nuget/v/nanoFramework.AtomLite.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.AtomMatrix</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.AtomMatrix/"><img src="https://img.shields.io/nuget/v/nanoFramework.AtomMatrix.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.Fire</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.Fire/"><img src="https://img.shields.io/nuget/v/nanoFramework.Fire.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
<tr>
<td>nanoFramework.MagicBit</td>
<td><a href="https://www.nuget.org/packages/nanoFramework.MagicBit/"><img src="https://img.shields.io/nuget/v/nanoFramework.MagicBit.svg?label=NuGet&amp;style=flat&amp;logo=nuget" alt="NuGet"></a></td>
</tr>
</tbody>
</table>
<h2 id="distribution-strategy">Distribution strategy</h2>
<p>To ease the burden of distributing and updating the class libraries we've choose to use Nuget to handle all this. It has the added benefit of dealing with the dependency management, version and such.</p>
<p>So, for each class library, there is a Nuget package that includes the assembly and documentation files. The Nuget package takes care of making sure that the required dependency(ies) and correct version(s) are added to a managed (C#) project, making a developer's life much easier.</p>
<h2 id="how-to-add-a-new-class-library">How to add a new class library</h2>
<p>Follow the procedure to add a new class library to a .NET <strong>nanoFramework</strong> target image.</p>
<p>The example is for adding System.Device.Gpio library.</p>
<ol>
<li><p>In Visual Studio start a new project for a .NET <strong>nanoFramework</strong> C# Class library. Source code <a href="https://github.com/nanoframework/System.Device.Gpio">here</a></p>
</li>
<li><p>Implement all the required methods, enums, properties in that project. It's recommended that you add XML comments there (and enable the automated documentation generation in the project properties).</p>
</li>
<li><p>Add the NuGet packaging project to distribute the managed assembly and documentation. We have a second NuGet package that includes all the build artefacts, generated stubs, dump files and such. This is to be used in automated testing and distribution of follow-up projects or build steps.</p>
</li>
<li><p>Upon a successfully build of the managed project the skeleton with the stubs should be available in the respective folder. Because .NET <strong>nanoFramework</strong> aims to be target independent, the native implementation of a class library can be split in two parts:</p>
<ul>
<li>Declaration and common code bits (these always exist) inside the <code>src</code> folder. This is the place where the stubs must be placed:
<ul>
<li>Common <a href="https://github.com/nanoframework/nf-interpreter/tree/main/src/System.Device.Gpio">System.Device.Gpio</a>.</li>
</ul>
</li>
<li>The specific implementation bits that are platform dependent and that will live 'inside' each platform RTOS folder:
<ul>
<li>ChibiOS <a href="https://github.com/nanoframework/nf-interpreter/tree/main/targets/ChibiOS/_nanoCLR/System.Device.Gpio">System.Device.Gpio</a>.</li>
<li>ESP32 FreeRTOS <a href="https://github.com/nanoframework/nf-interpreter/tree/main/targets/ESP32/_nanoCLR/System.Device.Gpio">System.Device.Gpio</a>.</li>
<li>TI-RTOS <a href="https://github.com/nanoframework/nf-interpreter/tree/main/targets/TI_SimpleLink/_nanoCLR/System.Device.Gpio">System.Device.Gpio</a>.</li>
</ul>
</li>
</ul>
</li>
<li><p>Add the CMake as a module to the modules folder <a href="https://github.com/nanoframework/nf-interpreter/tree/develop/CMake/Modules">here</a>. The name of the module should follow the assembly name (Find<strong>System.Device.Gpio</strong>.cmake). Mind the CMake rules for the naming: start with <em>Find</em> followed by the module name and <em>cmake</em> extension. The CMake for the System.Device.Gpio module is <a href="https://github.com/nanoframework/nf-interpreter/blob/main/CMake/Modules/FindSystem.Device.Gpio.cmake">here</a>.</p>
</li>
<li><p>In the CMake <a href="https://github.com/nanoframework/nf-interpreter/blob/main/CMake/Modules/FindNF_NativeAssemblies.cmake">FindNF_NativeAssemblies.cmake</a> add an option for the API. The option name must follow the pattern API_<strong>namespace</strong>. The option for System.Device.Gpio is API_System.Device.Gpio.</p>
</li>
<li><p>In the CMake <a href="https://github.com/nanoframework/nf-interpreter/blob/main/CMake/Modules/FindNF_NativeAssemblies.cmake">NF_NativeAssemblies.cmake</a> find the text <code>WHEN ADDING A NEW API add the corresponding block below</code> and add a block for the API. Just copy/paste an existing one and replace the namespace with the one that you are adding.</p>
</li>
<li><p>Update the CMake presets file (or files, if this is to be added to multiple targets) e.g. for the ST_STM32F769I_DISCOVERY <a href="https://github.com/nanoframework/nf-interpreter/blob/main/targets/ChibiOS/ST_STM32F769I_DISCOVERY/CMakePresets.json">here</a> to include the respective option. For the System.Device.Gpio example you would add in the <em>cacheVariables</em> collection the following entry: &quot;API_System.Device.Gpio&quot; : &quot;ON&quot;.</p>
</li>
<li><p>If the API requires enabling hardware or SoC peripherals in the target HAL/PAL make the required changes to the appropriate files.
For System.Device.Gpio in ChibiOS there is nothing to enable because the GPIO subsystem is always enabled.
In contrast, for the System.Device.Spi, the SPI subsystem has to be enabled at the <em>halconf.h</em> file and also (at driver level) in <em>mcuconf.h</em> the SPI peripherals have to be individually enabled (e.g. <code>#define STM32_SPI_USE_SPI1 TRUE</code>).</p>
<blockquote>
<p>Note: To ease the overall configuration of an API and related hardware (and when it makes sense) the API option (API_System.Device.Gpio) can be <em>extended</em> to automatically enable the HAL subsystem. This happens with the System.Device.Spi API. The CMake option is mirrored in the general <a href="https://github.com/nanoframework/nf-interpreter/blob/main/CMakeLists.txt">CMakeLists.txt</a> in order to be used in CMakes and headers. This mirror property is <code>HAL_USE_SPI_OPTION</code>. It's being defined here and not in the individual <em>halconf.h</em> files as usual. To make this work the CMake property has to be added to the CMake template file of the platform <a href="https://github.com/nanoframework/nf-interpreter/blob/main/targets/ChibiOS/_nanoCLR/target_platform.h.in">target_platform.h.in</a>.</p>
</blockquote>
</li>
<li><p>When adding/enabling new APIs and depending on how the drivers and the library are coded, some static variables will be added to the BSS RAM area. Because of that extra space that is taken by those variables the Managed Heap size may have to be adjusted to make room for those. To do this find the <code>__clr_managed_heap_size__</code> in the general CMakeLists.txt of that target and decrease the value there as required.</p>
</li>
<li><p>Some APIs depend of others. This happens for example with System.Device.Gpio that requires nanoFramework.Runtime.Events in order to generate the interrupts for the changed pin values. To make this happen the option to include the required API(s) has to be enabled in the main <a href="https://github.com/nanoframework/nf-interpreter/blob/main/CMakeLists.txt">CMakeLists.txt</a> inside the if clause of the dependent API. Just like if the option was enabled at the CMake command line. Check this by searching for <code>API_nanoFramework.Runtime.Events</code> inside the <code>if(API_System.Device.Gpio)</code>.</p>
</li>
</ol>
<h2 id="how-to-include-a-class-library-in-the-build">How to include a class library in the build</h2>
<p>To include a class library in the build for a target image you have to add to the CMake an option for the API. For the System.Device.Gpio example the option would be <code>-DAPI_System.Device.Gpio=ON</code>.
You can also add this to your own <code>CMakePresets.json</code> / <code>CMakeUserPresets.json</code> file.
To exclude a class library just set the option to OFF or simply don't include it in the command.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/architecture/class-libraries.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
