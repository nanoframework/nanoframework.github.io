<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Publish Workflow and Strategy | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Publish Workflow and Strategy | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/maintainers/publish-workflow.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="publish-workflow-and-strategy">Publish Workflow and Strategy</h1>

<h2 id="about-this-document">About this document</h2>
<p>This document describes the workflow and strategy adopted by .NET <strong>nanoFramework</strong> to handle the merging, branching and release publishing.</p>
<h2 id="pull-requests">Pull Requests</h2>
<p>Pull requests with contributions are <strong>always</strong> merged into <em>main</em> branch.
On each pull request build the respective NuGet packages are published to nanoFramework <a href="https://dev.azure.com/nanoframework/feed/_packaging?_a=feed&amp;feed=sandbox">Azure DevOps NuGet feed</a> (if this is a component that uses this distribution channel). By sourcing this NuGet feed someone testing that pull request can reference it straight away without any further hassle.
There is nothing else to be done as the package identifier and the version are automatically incremented based.</p>
<h2 id="development">Development</h2>
<p>Once pull requests have been merged into <em>main</em> a new release is automatically generated and published to nanoFramework <a href="https://dev.azure.com/nanoframework/feed/_packaging?_a=feed&amp;feed=sandbox">Azure DevOps NuGet feed</a> (if this is a component that uses this distribution channel).
There is nothing else to be done as the package identifier and the version are automatically incremented.</p>
<h2 id="versioning">Versioning</h2>
<p>When a release contains a breaking change MAJOR version should be increased by one and reset the MINOR back to zero and keep the PATCH at zero. Otherwise just bump the MINOR version by one and keep the PATCH at zero.</p>
<p>At this stage the contributor proposing a new release must perform a few administrative tasks. It's the responsibility of the release approver to verify that these tasks have been performed correctly.</p>
<p>Details on the release preparation can be read from the Nerdbank GitVersioning documentation <a href="https://github.com/AArnott/Nerdbank.GitVersioning/blob/master/doc/nbgv-cli.md#preparing-a-release">here</a>.</p>
<p>If the process for merging individual pull requests was followed perfectly there is not much else to do except verify that all pull requests have assigned a milestone and an appropriate label.
The label classifies the type of change and it's mandatory because the release notes are automatically generated from this information.
For the purposes of the automated release notes generation, only the pull requests have to follow this strict label mapping, not the issues. This is because the issue management is centralized in the Home repo (not per repository).
The pull requests that address an issue already link to that issue thus making easy to trace the changes and the reasoning about those, ultimately self-documenting the changes.</p>
<p>If there are any problems with the generated release notes document, resolve those in GitHub by assigning the appropriate labels to the pull requests and then re-run the build for the merge commit in Azure DevOps.</p>
<h2 id="production">Production</h2>
<p>The process is kicked off by opening up a pull request from a <em>release-vN.N.N</em> branch to <em>main</em>.</p>
<p>In the Home repository, edit the vNext milestone and change it to the version number of this release.</p>
<p>Once the pull request has been approved use the <em>merge commit</em> option (<strong>not the squash and merge</strong>). This will trigger a new CI build after which a new draft release with be generated along with the release notes. If the validation of these has already been done in the <em>release-vN.N.N</em> step above there should be no need for further corrections.</p>
<p>Pressing the publish release button will stamp the repository with a git tag with the release version, overriding any automatic versioning strategies and trigger a new build which will be automatically published to NuGet (if this is a component that uses this distribution channel).</p>
<p>After the build for the tag release is completed edit the source/version.json file and bump the <code>version</code> field to the vNext version, including the preview tag. Then start a new PR from the <em>release-vN.N.N</em> into the develop branch. This makes any changes in that have been made branch should be deleted.</p>
<p>After the CI completes <em>squash and merge</em> (<strong>really really squash and merge</strong>) the PR. The <em>release-vN.N.N</em> branch can now be safely be deleted.</p>
<p>To complete this step create a new vNext milestone in the Home repo.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/maintainers/publish-workflow.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
