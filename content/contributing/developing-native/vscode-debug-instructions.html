<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Instructions for debugging .NET nanoFramework native code in VS Code | nanoFramework Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Instructions for debugging .NET nanoFramework native code in VS Code | nanoFramework Documentation ">
    <meta name="generator" content="docfx 2.56.4.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="instructions-for-debugging-net-nanoframework-native-code-in-vs-code">Instructions for debugging .NET <strong>nanoFramework</strong> native code in VS Code</h1>

<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#preparation">Preparation</a></li>
<li><a href="#launch-the-debug-session">Launch the debug session</a></li>
</ul>
<p><strong>About this document</strong></p>
<p>This document describes how to debug .NET <strong>nanoFramework</strong> native code using VS Code.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You'll need:</p>
<ul>
<li><a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads">GNU ARM Embedded Toolchain</a></li>
<li><a href="http://code.visualstudio.com/">Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C/C++ extension</a></li>
<li>OpenOCD (any working distribution will work, follow some suggestions)
<ul>
<li><a href="http://www.freddiechopin.info/en/download/category/10-openocd-dev">Freddie Chopin OpenOCD (development)</a></li>
<li><a href="https://sourceforge.net/projects/openocd/">OpenOCD – Open On-Chip Debugger</a></li>
<li><a href="https://github.com/gnuarmeclipse/openocd">GNU ARM Eclipse OpenOCD</a></li>
</ul>
</li>
</ul>
<h2 id="preparation">Preparation</h2>
<p>You'll need a binary image with debug information to be loaded in the SoC or MCU.
Assuming you are using VS Code to launch your builds, you'll have this image ready to be loaded in the MCU.
(see <a href="build-instructions.md">Build instructions documentation</a>)</p>
<p>In order to launch the debug session you'll need to setup the <em>launch.json</em> file, located in the .vscode folder.
We've provided a template file <code>launch.TEMPLATE.json</code> (inside .vscode folder on the repository) to get you started with this. Just copy it and rename to <em>launch.json</em>.</p>
<p>Here's what you need to change in order to adapt the template file to your setup and make it more suitable to your working style and preferences.</p>
<ul>
<li>name: here you can name each of the launch configurations to help choosing the appropriate one when launching the debug session. These could be for example: &quot;nanoBooter in Discovery 4&quot;, &quot;nanoCLR in Nucleo F091RC&quot;, &quot;test featureXYZ in Discovery 4&quot;.</li>
<li>miDebuggerPath: full path to the gdb executable (this one is inside the GCC tool-chain folder)</li>
<li>program: full path to the .elf output file that results from a successful build</li>
<li>setupCommands (fourth 'text' entry): full path to the final image (the .hex file)</li>
<li>setupCommands (fifth 'text' entry): the same as the program entry above (the .elf file)</li>
<li>debugServerPath: full path to the OpenOCD executable</li>
<li>debugServerArgs: full path to the scripts directory on the OpenOCD installation AND the appropriate .cfg files for the interface and the board.</li>
</ul>
<p><em>Note 1: VS Code parser seems to have trouble parsing and replacing the ${workspaceRoot} for some OpenOCD commands. That's the reason why you see there the ${workspaceRoot} variable and in other places the full path were that variable would make sense to be at. Just use what's there to keep OpenOCD happy.</em></p>
<p><em>Note 2: Always mind the forward slash in the paths above, otherwise you'll get into troubles with strange and unclear errors from OpenOCD.</em></p>
<h3 id="templates">Templates</h3>
<p>To make your life easier, we provide templates with pre-configured launch.json for the various reference targets. Just grab them from our Gist.</p>
<ul>
<li><p><a href="https://gist.github.com/nfbot/560137d32820c5cd3b06e77cb5d9bee7">ST_STM32F4_DISCOVERY</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/06eadeca52fbed933b4b37a5942661a6">ST_STM32F429I_DISCOVERY</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/827f96ab56d638d2a9806c59fd958112">ST_NUCLEO_F091RC</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/11aa07dd11480a23810c58f33f82f499">ST_NUCLEO144_F746ZG</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/6629a3c37f4351ba793dd5e4e3228ca4">ST_STM32F769I_DISCOVERY</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/1c088f66b19fb20d45f0aa0656131239">TI_CC3220SF_LAUNCHXL</a></p>
</li>
</ul>
<h2 id="launch-the-debug-session">Launch the debug session</h2>
<p>Using VS Code menu View &gt; Debug, clicking on the debug icon on the left hand toolbar or hitting the CTRL+SHIT+D shortcut you'll reach the debug view. There you'll find the launch configurations for debug that we've setup above (see the drop down at the top) and the familiar green play button (or F5 if you prefer).</p>
<p>When a debug session is active you can find a lot of familiar stuff:</p>
<ul>
<li>debug toolbar with the usual operations (pause, step over, into, out, restart and stop)</li>
<li>variables list</li>
<li>call stack that you can use to navigate up and down</li>
<li>breakpoint list to manage those</li>
<li>watch expressions</li>
<li>support for 'mouse over' a variable which will display a context with the variable content</li>
<li>ability to set/remove breakpoints by clicking near the line number</li>
<li>other handy tools and options using the right click on the various objects</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/contributing/developing-native/vscode-debug-instructions.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2018 nanoFramework Contributors<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
