<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Instructions for debugging .NET nanoFramework native code in VS Code | .NET nanoFramework Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Instructions for debugging .NET nanoFramework native code in VS Code | .NET nanoFramework Documentation ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../../x-cross/toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/contributing/developing-native/vscode-debug-instructions.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="instructions-for-debugging-net-nanoframework-native-code-in-vs-code">Instructions for debugging .NET <strong>nanoFramework</strong> native code in VS Code</h1>

<h2 id="about-this-document">About this document</h2>
<p>This document describes how to debug .NET <strong>nanoFramework</strong> native code using VS Code.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You'll need:</p>
<ul>
<li><a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads">GNU ARM Embedded Toolchain</a></li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C/C++ extension</a></li>
<li>OpenOCD. Suggest the <a href="https://github.com/xpack-dev-tools/openocd-xpack/releases">xPack OpenOCD</a> that kindly maintains a Windows distribution.</li>
</ul>
<h2 id="preparation">Preparation</h2>
<p>You'll need a binary image with debug information to be loaded in the SoC or MCU.
Assuming you are using VS Code to launch your builds, you'll have this image ready to be loaded in the MCU.
(see <a href="../../building/build-instructions.html">Build instructions documentation</a>)</p>
<p>In order to launch the debug session you'll need to setup the <em>launch.json</em> file, located in the .vscode folder.
We've provided a template file <code>launch.TEMPLATE.json</code> (inside .vscode folder on the repository) to get you started with this. Just copy it and rename to <em>launch.json</em>.</p>
<p>Here's what you need to change in order to adapt the template file to your setup and make it more suitable to your working style and preferences.</p>
<ul>
<li>name: here you can name each of the launch configurations to help choosing the appropriate one when launching the debug session. These could be for example: &quot;nanoBooter in Discovery 4&quot;, &quot;nanoCLR in Nucleo F091RC&quot;, &quot;test featureXYZ in Discovery 4&quot;.</li>
<li>miDebuggerPath: full path to the gdb executable (this one is inside the GCC tool-chain folder)</li>
<li>program: full path to the .elf output file that results from a successful build</li>
<li>setupCommands (fourth 'text' entry): full path to the final image (the .hex file)</li>
<li>setupCommands (fifth 'text' entry): the same as the program entry above (the .elf file)</li>
<li>debugServerPath: full path to the OpenOCD executable</li>
<li>debugServerArgs: full path to the scripts directory on the OpenOCD installation AND the appropriate .cfg files for the interface and the board.</li>
</ul>
<blockquote>
<p>Note 1: VS Code parser seems to have trouble parsing and replacing the ${workspaceRoot} for some OpenOCD commands. That's the reason why you see there the ${workspaceRoot} variable and in other places the full path were that variable would make sense to be at. Just use what's there to keep OpenOCD happy.
Note 2: Always mind the forward slash in the paths above, otherwise you'll get into troubles with strange and unclear errors from OpenOCD.</p>
</blockquote>
<h3 id="templates">Templates</h3>
<p>To make your life easier, we provide templates with pre-configured launch.json for the various reference targets. Just grab them from our Gist.</p>
<ul>
<li><p><a href="https://gist.github.com/nfbot/560137d32820c5cd3b06e77cb5d9bee7">ST_STM32F4_DISCOVERY</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/06eadeca52fbed933b4b37a5942661a6">ST_STM32F429I_DISCOVERY</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/827f96ab56d638d2a9806c59fd958112">ST_NUCLEO_F091RC</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/11aa07dd11480a23810c58f33f82f499">ST_NUCLEO144_F746ZG</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/6629a3c37f4351ba793dd5e4e3228ca4">ST_STM32F769I_DISCOVERY</a></p>
</li>
<li><p><a href="https://gist.github.com/nfbot/1c088f66b19fb20d45f0aa0656131239">TI_CC3220SF_LAUNCHXL</a></p>
</li>
</ul>
<h2 id="launch-the-debug-session">Launch the debug session</h2>
<p>Using VS Code menu View &gt; Debug, clicking on the debug icon on the left hand toolbar or hitting the CTRL+SHIT+D shortcut you'll reach the debug view. There you'll find the launch configurations for debug that we've setup above (see the drop down at the top) and the familiar green play button (or F5 if you prefer).</p>
<p>When a debug session is active you can find a lot of familiar stuff:</p>
<ul>
<li>debug toolbar with the usual operations (pause, step over, into, out, restart and stop)</li>
<li>variables list</li>
<li>call stack that you can use to navigate up and down</li>
<li>breakpoint list to manage those</li>
<li>watch expressions</li>
<li>support for 'mouse over' a variable which will display a context with the variable content</li>
<li>ability to set/remove breakpoints by clicking near the line number</li>
<li>other handy tools and options using the right click on the various objects</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/nanoframework/nanoframework.github.io/blob/pages-source/content/contributing/developing-native/vscode-debug-instructions.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
